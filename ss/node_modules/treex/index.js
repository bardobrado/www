const fs = require('fs');
const _path = require('path');

function travseDirSync(path, MaxDepth, depth = 1) {
  if (!path) path = '.';
  if (!MaxDepth) MaxDepth = Number.MAX_VALUE;
  if (depth > MaxDepth) return;
  let files = fs.readdirSync(path);

  let blank = ''
  for (let i = 1; i < depth; i++) {
    blank += '  ';
  }
  if (depth === 1) console.log("%s", path)

  for (let file of files) {
    let subPath = _path.resolve(path, file)      
    
    let stat = fs.statSync(subPath);
    if (stat.isDirectory() && depth < MaxDepth) {
      console.log("%s|- %s",blank, _path.basename(subPath))              
      travseDirSync(subPath, MaxDepth, depth + 1)
    } else {
      console.log("%s|- %s",blank, file)
    }
  }
}


module.exports = travseDirSync;

